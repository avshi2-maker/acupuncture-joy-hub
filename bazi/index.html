
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Roni Clinical System v1767875803</title>
    <style>
        /* RESET & BASICS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)), url('bazi_background.png?v=1767875803');
            background-size: cover; background-position: center; background-attachment: fixed;
            min-height: 100vh; color: #333; padding: 20px;
        }
        
        /* CONTAINER */
        #container { max-width: 800px; margin: 0 auto; }
        
        /* CARD STYLE */
        .card {
            background: white; padding: 25px; border-radius: 15px; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.1); margin-bottom: 25px;
            border: 1px solid #e0e0e0;
        }
        
        h1 { color: #2c5f2d; text-align: center; margin-bottom: 5px; }
        h2 { color: #1a5f7a; border-bottom: 2px solid #b7e4c7; padding-bottom: 10px; margin-bottom: 20px; font-size: 1.4em; }

        /* SECTION 1: QA BUTTONS */
        .qa-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; }
        .qa-btn {
            background: #e8f5e9; padding: 12px; border: 1px solid #c8e6c9; border-radius: 8px;
            cursor: pointer; text-align: right; font-weight: bold; color: #2e7d32;
            transition: 0.2s;
        }
        .qa-btn:hover { background: #c8e6c9; transform: translateY(-2px); }

        /* SECTION 2: INPUTS (ALWAYS VISIBLE) */
        .input-block { margin-bottom: 15px; }
        .label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; }
        
        /* TEXTAREA FOR MAIN COMPLAINT (Big Box) */
        textarea {
            width: 100%; height: 100px; padding: 12px; 
            border: 2px solid #b2dfdb; border-radius: 8px; font-size: 16px;
            font-family: inherit; resize: vertical;
        }
        
        /* INPUTS FOR DETAILS (Smaller Boxes) */
        input[type="text"] {
            width: 100%; height: 50px; padding: 12px;
            border: 2px solid #b2dfdb; border-radius: 8px; font-size: 16px;
        }
        
        textarea:focus, input:focus { outline: none; border-color: #00897b; background: #f0fdfc; }

        /* SECTION 3: ACTIONS */
        .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .btn {
            padding: 15px; border: none; border-radius: 50px; color: white;
            font-weight: bold; font-size: 1.1em; cursor: pointer; text-align: center;
        }
        .btn-internal { background: #2c5f2d; }
        .btn-external { background: linear-gradient(135deg, #009688 0%, #004d40 100%); }

        /* RESULTS (Hidden by default) */
        #results-area { display: none; margin-top: 20px; }
        .result-box { background: #fffde7; padding: 15px; border-radius: 10px; border: 1px solid #fbc02d; }
        .fallback-box { background: #ffebee; padding: 15px; border-radius: 10px; border: 1px solid #ef5350; color: #c62828; display: none; }

    </style>
</head>
<body>

<div id="container">
    
    <div class="card">
        <h1>ğŸŒ¿ Dr. Roni Sapir</h1>
        <p style="text-align:center; color:#666;">××¢×¨×›×ª ×§×œ×™× ×™×ª ××œ××”</p>
    </div>

    <div class="card">
        <h2>1. ×‘×—×¨ × ×•×©× (QA)</h2>
        <div class="qa-grid">
            <button class="qa-btn" onclick="fill('×›××‘×™ ×¨××© ×—×–×§×™×', '××•×¤×™×¢ ×‘×‘×•×§×¨, ××—××™×¨ ×‘××•×¨', '×”×§×œ×” ××™×™×“×™×ª')">ğŸ¤• ×›××‘×™ ×¨××©</button>
            <button class="qa-btn" onclick="fill('×¢×™×™×¤×•×ª ×›×¨×•× ×™×ª ×•×—×•×œ×©×”', '×‘×¢×™×§×¨ ××—×¨×™ ×”××•×›×œ', '×—×™×–×•×§ ×× ×¨×’×™×”')">ğŸ”‹ ×¢×™×™×¤×•×ª</button>
            <button class="qa-btn" onclick="fill('× ×“×•×“×™ ×©×™× ×” ×•××—×©×‘×•×ª', '×§×•×©×™ ×œ×”×™×¨×“× ×‘×œ×™×œ×”', '×©×™× ×” ×¨×¦×™×¤×”')">ğŸ˜´ ×©×™× ×”</button>
            <button class="qa-btn" onclick="fill('×›××‘×™ ×’×‘ ×ª×—×ª×•×Ÿ', '××•×—××¨ ×‘×™×©×™×‘×” ×××•×©×›×ª', '×©×™×¤×•×¨ ×˜×•×•×— ×ª× ×•×¢×”')">ğŸ¦´ ××•×¨×ª×•×¤×“×™×”</button>
        </div>

        <hr style="margin: 25px 0; border: 0; border-top: 1px solid #eee;">

        <h2>2. ×¤×™×¨×•×˜ ×”××§×¨×” (×”×§×œ×“ ×—×•×¤×©×™)</h2>
        
        <div class="input-block">
            <span class="label">ğŸ”¹ ×ª×œ×•× ×” ×¢×™×§×¨×™×ª (××” ×”×‘×¢×™×”?):</span>
            <textarea id="q1" placeholder="×”×§×œ×“ ×›××Ÿ ××ª ×”×ª×œ×•× ×”..."></textarea>
        </div>

        <div class="input-block">
            <span class="label">ğŸ”¹ × ×¡×™×‘×•×ª (××ª×™/××™×¤×”/××” ××—××™×¨?):</span>
            <input type="text" id="q2" placeholder="×œ××©×œ: ×‘×‘×•×§×¨, ×‘×§×•×¨, ×‘××ª×—...">
        </div>

        <div class="input-block">
            <span class="label">ğŸ”¹ ××˜×¨×ª ×”×˜×™×¤×•×œ (Goal):</span>
            <input type="text" id="q3" placeholder="××” ×”×ª×•×¦××” ×”×¨×¦×•×™×”?">
        </div>

        <div class="btn-row">
            <button class="btn btn-internal" onclick="analyze()">ğŸ” ××‘×—×•×Ÿ ×¤× ×™××™</button>
            <button class="btn btn-external" onclick="askPerplexity()">ğŸ”® ×©××œ ××ª Perplexity</button>
        </div>
    </div>

    <div id="results-area" class="card">
        <h2>ğŸ“‹ ×ª×•×¦××•×ª</h2>
        
        <div id="bazi-box" class="result-box" style="display:none;">
            <h3>âœ… ××‘×—×•×Ÿ ×× ×¨×’×˜×™ (Ba Zi)</h3>
            <p><strong>××œ×× ×˜ ×××•×‘×—×Ÿ:</strong> ××™× ×™×× ×’ (Water Yang)<br>
            <strong>×¢×•× ×”:</strong> ×¡×ª×™×• (××ª×›×ª)<br>
            <strong>× ×§×•×“×•×ª ××•××œ×¦×•×ª:</strong> KI6, TH1, GB38</p>
        </div>

        <div id="fallback-box" class="fallback-box">
            <h3âš ï¸ ×œ× × ××¦××” ×”×ª×××” ×¤× ×™××™×ª</h3>
            <p>×”××•× ×— ×œ× ×–×•×”×” ×‘×××’×¨ ×”××¢×¨×›×ª.<br>×× × ×”×©×ª××© ×‘×›×¤×ª×•×¨ Perplexity.</p>
        </div>

        <div style="margin-top:20px; text-align:center;">
            <a id="wa-link" href="#" target="_blank" style="background:#25D366; color:white; padding:10px 20px; border-radius:20px; text-decoration:none; font-weight:bold;">
                ğŸ‘©â€âš•ï¸ ×©×œ×— ×œ-WhatsApp ×©×œ ×“"×¨ ×¨×•× ×™
            </a>
        </div>
    </div>

</div>

<script>
    // --- JAVASCRIPT LOGIC ---

    // 1. FILL FUNCTION (Populates the 3 boxes)
    function fill(complaint, context, goal) {
        document.getElementById('q1').value = complaint;
        document.getElementById('q2').value = context;
        document.getElementById('q3').value = goal;
    }

    // 2. ANALYZE INTERNAL
    function analyze() {
        const q1 = document.getElementById('q1').value;
        const q2 = document.getElementById('q2').value;
        const q3 = document.getElementById('q3').value;
        
        if(!q1) { alert("× × ×œ×”×–×™×Ÿ ×ª×œ×•× ×” ×¢×™×§×¨×™×ª"); return; }

        document.getElementById('results-area').style.display = 'block';

        // Simple Keyword Matching
        const fullText = (q1 + " " + q2).toLowerCase();
        const keywords = ["×›××‘", "×¨××©", "×‘×˜×Ÿ", "×¢×™×™×¤×•×ª", "×©×™× ×”", "×’×‘", "tcm", "×“×™×§×•×¨", "qi", "yin"];
        
        const isMedical = keywords.some(k => fullText.includes(k));

        if(isMedical) {
            document.getElementById('bazi-box').style.display = 'block';
            document.getElementById('fallback-box').style.display = 'none';
        } else {
            document.getElementById('bazi-box').style.display = 'none';
            document.getElementById('fallback-box').style.display = 'block';
        }

        // Update WhatsApp Link
        const msg = `*×¤× ×™×™×” ×—×“×©×”:*\n1. ×ª×œ×•× ×”: ${q1}\n2. × ×¡×™×‘×•×ª: ${q2}\n3. ××˜×¨×”: ${q3}`;
        document.getElementById('wa-link').href = `https://wa.me/972544634923?text=${encodeURIComponent(msg)}`;
    }

    // 3. ASK PERPLEXITY (Combines all 3 boxes)
    function askPerplexity() {
        const q1 = document.getElementById('q1').value;
        const q2 = document.getElementById('q2').value;
        const q3 = document.getElementById('q3').value;
        
        const combinedQuery = q1 + " " + q2 + " " + q3;
        
        if(!combinedQuery.trim()) { alert("× × ×œ×”×–×™×Ÿ × ×ª×•× ×™×"); return; }
        
        window.open(`https://www.perplexity.ai/search?q=${encodeURIComponent(combinedQuery)}`, '_blank');
    }
</script>

</body>
</html>
